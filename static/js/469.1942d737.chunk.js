"use strict";(self.webpackChunkflow_project=self.webpackChunkflow_project||[]).push([[469],{8469:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var n=a(2555),s=a(5043),l=a(1719),r=a(4063),i=a(4282),c=a(8628),o=a(8602),d=a(3519),u=a(3814),h=a(2223),x=a(3083),m=a(1072),A=a(7417),j=a(9001),v=a(9722),D=a(7285),p=a(4625),g=a(3805),N=a(3806),S=a(7807),b=a(4294),f=a(6951),w=a(579);const y="https://api.baserow.io/api/database/rows/table/731547",C="Token 98AKl7obBru7KCXaMa6GeXe4ezSvlPBW",E="",F="",k=e=>{switch(e){case"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e41\u0e25\u0e49\u0e27":return"#28a745";case"\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e01\u0e49\u0e44\u0e02":return"#dc3545";default:return"#ffc107"}},_=e=>{if(!e)return"";try{const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(s)}catch(t){return e}},B=e=>{if(!e||e.includes("-"))return e;const t=e.split("/");return 3===t.length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):e};function M(){const[e,t]=(0,s.useState)([]),[a,M]=(0,s.useState)(!0),[T,Y]=(0,s.useState)(null),[G,I]=(0,s.useState)(!1),[H,L]=(0,s.useState)(""),[O,z]=(0,s.useState)(!1),[q,K]=(0,s.useState)([]),[P,W]=(0,s.useState)({id:0,Name:"",Date:"",EndDate:"",File:"",Status:1}),X=()=>I(!1),J=()=>I(!0),V=(e,t)=>{const a="Status"===e?parseInt(t):t;W(t=>(0,n.A)((0,n.A)({},t),{},{[e]:a}))};function Q(){M(!0);let e={method:"get",url:"".concat(y,"/?user_field_names=true"),headers:{Authorization:C}};v.A.request(e).then(e=>{const a=e.data.results,n=a.map(e=>{var t,a;return{id:e.id,title:e.Name,start:e.Date,end:e.EndDate,backgroundColor:k(null===(t=e.Status)||void 0===t?void 0:t.value),borderColor:k(null===(a=e.Status)||void 0===a?void 0:a.value),extendedProps:e}});t(n),R(a),Y(null)}).catch(e=>{console.log(e),Y("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2d\u0e35\u0e40\u0e27\u0e49\u0e19")}).finally(()=>{M(!1)})}const R=e=>{const t=new Date;t.setHours(0,0,0,0);const a=new Date(t);a.setDate(t.getDate()+3);const n=e.filter(e=>{if(!e.Date)return!1;const n=new Date(e.Date);return n.setHours(0,0,0,0),n>=t&&n<=a});n.length>0&&(K(n),z(!0))};if((0,s.useEffect)(()=>{const e=localStorage.getItem("user");if(e){var t;const a=JSON.parse(e);L(String((null===(t=a.type)||void 0===t?void 0:t.value)||a.type||""))}Q()},[]),a)return(0,w.jsx)(A.A,{animation:"border",className:"mt-5"});const U="3"===H;return(0,w.jsxs)(d.A,{className:"p-4",children:[(0,w.jsx)(m.A,{className:"mb-4",children:(0,w.jsx)(o.A,{className:"text-center",children:(0,w.jsx)("h1",{className:"mb-3",children:"\u0e22\u0e34\u0e19\u0e14\u0e35\u0e15\u0e49\u0e2d\u0e19\u0e23\u0e31\u0e1a\u0e2a\u0e39\u0e48 FLOW"})})}),T&&(0,w.jsx)(l.A,{variant:"danger",className:"mb-4",children:T}),(0,w.jsxs)("div",{className:"bento-grid",children:[(0,w.jsx)(c.A,{className:"bento-box-large",children:(0,w.jsxs)(c.A.Body,{className:"p-4",children:[(0,w.jsx)(c.A.Title,{as:"h3",className:"mb-3",children:"\u0e1b\u0e0f\u0e34\u0e17\u0e34\u0e19\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21"}),(0,w.jsx)(D.A,{plugins:[p.A,g.A,N.A,S.Ay,b.A,f.A],googleCalendarApiKey:E,eventSources:[{events:e,color:"blue"},{id:"google",googleCalendarId:F,color:"#009688",textColor:"white"}],initialView:"dayGridMonth",headerToolbar:{left:"title",center:"",right:"dayGridMonth,listWeek prev,next"},locale:"th",height:"auto",editable:!0,selectable:!0,dateClick:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?_(e):"";W({id:0,Name:"",Date:t,EndDate:t,File:"",Status:1})}(e.dateStr),J()},eventClick:e=>{var t,a;if("google"===(null===(t=e.event.source)||void 0===t?void 0:t.id))return;const n=e.event.extendedProps;W({id:n.id,Name:n.Name||"",Date:_(n.Date),EndDate:_(n.EndDate),File:n.File&&n.File.length>0?n.File[0].url:"",Status:(null===(a=n.Status)||void 0===a?void 0:a.id)||1}),J()}})]})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(c.A.Body,{className:"text-center p-4",children:[(0,w.jsx)(c.A.Title,{as:"h3",children:"\u0e1a\u0e23\u0e34\u0e2b\u0e32\u0e23\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23 (Admin)"}),(0,w.jsx)(i.A,{as:j.N_,to:"/customers",variant:"primary",children:"\u0e44\u0e1b\u0e2b\u0e19\u0e49\u0e32\u0e1a\u0e23\u0e34\u0e2b\u0e32\u0e23\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23"})]})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(c.A.Body,{className:"text-center p-4",children:[(0,w.jsx)(c.A.Title,{as:"h3",children:"\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21 (Event)"}),(0,w.jsx)(i.A,{as:j.N_,to:"/products/\u0e2d\u0e32\u0e08\u0e32\u0e23\u0e22\u0e4c\u0e41\u0e25\u0e30\u0e1a\u0e38\u0e04\u0e25\u0e32\u0e01\u0e23",variant:"outline-info",children:"\u0e14\u0e39\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"})]})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(c.A.Body,{className:"text-center p-4",children:[(0,w.jsx)(c.A.Title,{as:"h3",children:"\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e01\u0e31\u0e1a\u0e23\u0e30\u0e1a\u0e1a"}),(0,w.jsx)(i.A,{as:j.N_,to:"/about",variant:"outline-secondary",children:"\u0e2d\u0e48\u0e32\u0e19\u0e15\u0e48\u0e2d"})]})})]}),(0,w.jsxs)(x.A,{show:G,onHide:X,children:[(0,w.jsx)(x.A.Header,{closeButton:!0,children:(0,w.jsx)(x.A.Title,{children:P.id>0?"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2d\u0e35\u0e40\u0e27\u0e49\u0e19":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2d\u0e35\u0e40\u0e27\u0e49\u0e19\u0e43\u0e2b\u0e21\u0e48"})}),(0,w.jsxs)(x.A.Body,{children:[(0,w.jsxs)(u.A.Group,{className:"mb-3",children:[(0,w.jsx)(u.A.Label,{children:"\u0e0a\u0e37\u0e48\u0e2d\u0e07\u0e32\u0e19"}),(0,w.jsx)(u.A.Control,{type:"text",value:P.Name,onChange:e=>V("Name",e.target.value)})]}),(0,w.jsxs)(m.A,{children:[(0,w.jsx)(o.A,{children:(0,w.jsxs)(u.A.Group,{className:"mb-3",children:[(0,w.jsx)(u.A.Label,{children:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19"}),(0,w.jsx)(u.A.Control,{type:"text",placeholder:"DD/MM/YYYY",value:P.Date,onChange:e=>V("Date",e.target.value)})]})}),(0,w.jsx)(o.A,{children:(0,w.jsxs)(u.A.Group,{className:"mb-3",children:[(0,w.jsx)(u.A.Label,{children:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e34\u0e49\u0e19\u0e2a\u0e38\u0e14"}),(0,w.jsx)(u.A.Control,{type:"text",placeholder:"DD/MM/YYYY",value:P.EndDate,onChange:e=>V("EndDate",e.target.value)})]})})]}),(0,w.jsxs)(u.A.Group,{className:"mb-3",children:[(0,w.jsx)(u.A.Label,{children:"\u0e25\u0e34\u0e07\u0e01\u0e4c\u0e43\u0e1a\u0e40\u0e2a\u0e23\u0e47\u0e08"}),(0,w.jsx)(u.A.Control,{type:"text",value:P.File,onChange:e=>V("File",e.target.value)})]}),(0,w.jsxs)(u.A.Group,{className:"mb-3",children:[(0,w.jsx)(u.A.Label,{children:"\u0e2a\u0e16\u0e32\u0e19\u0e30"}),(0,w.jsxs)(u.A.Select,{value:P.Status,onChange:e=>V("Status",e.target.value),children:[(0,w.jsx)("option",{value:"1",children:"\u0e23\u0e2d\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"}),(0,w.jsx)("option",{value:"2",children:"\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e41\u0e25\u0e49\u0e27"}),(0,w.jsx)("option",{value:"3",children:"\u0e15\u0e49\u0e2d\u0e07\u0e41\u0e01\u0e49\u0e44\u0e02"})]})]})]}),(0,w.jsxs)(x.A.Footer,{children:[P.id>0&&!U&&(0,w.jsx)(i.A,{variant:"danger",className:"me-auto",onClick:()=>function(e){if(!window.confirm("\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e02\u0e2d\u0e07 ".concat(P.Name," \u0e43\u0e0a\u0e48\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?")))return;let t={method:"delete",url:"".concat(y,"/").concat(e,"/"),headers:{Authorization:C}};v.A.request(t).then(()=>{I(!1),Q()}).catch(()=>Y("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e43\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"))}(P.id),children:"\u0e25\u0e1a Event \u0e19\u0e35\u0e49"}),(0,w.jsx)(i.A,{variant:"secondary",onClick:X,children:"\u0e1b\u0e34\u0e14"}),(0,w.jsx)(i.A,{variant:"primary",onClick:P.id>0?()=>(e=>{const t=B(P.Date)?new Date(B(P.Date)).toISOString():null,a=B(P.EndDate)&&B(P.EndDate)!==B(P.Date)?new Date(B(P.EndDate)).toISOString():null;let n={Name:P.Name,Date:t,EndDate:a,File:P.File?[{url:P.File}]:[],Status:P.Status},s={method:"patch",url:"".concat(y,"/").concat(e,"/?user_field_names=true"),headers:{Authorization:C},data:n};v.A.request(s).then(()=>{I(!1),Q(),Y(null)}).catch(()=>Y("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"))})(P.id):()=>{if(P.Name.length<=0)return alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e07\u0e32\u0e19"),!1;const e=B(P.Date)?new Date(B(P.Date)).toISOString():null,t=B(P.EndDate)&&B(P.EndDate)!==B(P.Date)?new Date(B(P.EndDate)).toISOString():null;let a={Name:P.Name,Date:e,EndDate:t,File:P.File?[{url:P.File}]:[],Status:P.Status},n={method:"post",url:"".concat(y,"/?user_field_names=true"),headers:{Authorization:C},data:a};v.A.request(n).then(()=>{I(!1),Q(),Y(null)}).catch(()=>Y("\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14"))},children:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"})]})]}),(0,w.jsxs)(x.A,{show:O,onHide:()=>z(!1),centered:!0,children:[(0,w.jsx)(x.A.Header,{closeButton:!0,className:"bg-warning text-dark",children:(0,w.jsx)(x.A.Title,{children:"\ud83d\udd14 \u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19: \u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e43\u0e01\u0e25\u0e49\u0e16\u0e36\u0e07\u0e27\u0e31\u0e19\u0e08\u0e31\u0e14\u0e07\u0e32\u0e19!"})}),(0,w.jsxs)(x.A.Body,{children:[(0,w.jsx)("p",{className:"text-muted mb-3",children:"\u0e21\u0e35\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e17\u0e35\u0e48\u0e01\u0e33\u0e25\u0e31\u0e07\u0e08\u0e30\u0e40\u0e01\u0e34\u0e14\u0e02\u0e36\u0e49\u0e19\u0e20\u0e32\u0e22\u0e43\u0e19 3 \u0e27\u0e31\u0e19\u0e19\u0e35\u0e49:"}),(0,w.jsx)(h.A,{variant:"flush",children:q.map((e,t)=>(0,w.jsxs)(h.A.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,w.jsxs)("div",{className:"ms-2 me-auto",children:[(0,w.jsx)("div",{className:"fw-bold",children:e.Name}),(0,w.jsxs)("small",{className:"text-muted",children:["\ud83d\udcc5 ",e.Date?e.Date.split("T")[0]:""]})]}),(0,w.jsxs)(r.A,{bg:"primary",pill:!0,children:[Math.ceil((new Date(e.Date)-new Date)/864e5)," \u0e27\u0e31\u0e19"]})]},t))})]}),(0,w.jsxs)(x.A.Footer,{children:[(0,w.jsx)(i.A,{variant:"secondary",onClick:()=>z(!1),children:"\u0e23\u0e31\u0e1a\u0e17\u0e23\u0e32\u0e1a"}),(0,w.jsx)(i.A,{variant:"primary",as:j.N_,to:"/customers",children:"\u0e44\u0e1b\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"})]})]})]})}}}]);
//# sourceMappingURL=469.1942d737.chunk.js.map