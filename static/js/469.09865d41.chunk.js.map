{"version":3,"file":"static/js/469.09865d41.chunk.js","mappings":"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","sources":["pages/lazy/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, Card, Modal, Form, Button, Row, Col, Spinner, Alert } from \"react-bootstrap\";\r\nimport { Link } from 'react-router-dom';\r\nimport axios from \"axios\";\r\n\r\n// (Imports FullCalendar)\r\nimport FullCalendar from '@fullcalendar/react';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\nimport listPlugin from '@fullcalendar/list';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport rrulePlugin from '@fullcalendar/rrule';\r\nimport googleCalendarPlugin from '@fullcalendar/google-calendar'; // vvv (1. Import ปลั๊กอินใหม่) vvv\r\n\r\n// --- API Config ---\r\nconst BASE_URL = \"https://api.baserow.io/api/database/rows/table/731547\"; \r\nconst API_TOKEN = \"Token pJmbVWCV1NFQ7333Cmqj822hINsyguMW\";\r\n\r\n// vvv (2. ใส่ข้อมูล Google API ของคุณ) vvv\r\nconst GOOGLE_CALENDAR_API_KEY = \"YOUR_GOOGLE_API_KEY_HERE\"; // (ใส่ Key ที่ได้จาก GCP)\r\nconst GOOGLE_CALENDAR_ID = \"YOUR_GOOGLE_CALENDAR_ID_HERE\"; // (ใส่ ID ปฏิทิน)\r\n\r\n// (ฟังก์ชันช่วยสำหรับสีของ Event)\r\nconst getStatusColor = (statusValue) => {\r\n  switch (statusValue) {\r\n    case \"อนุมัติแล้ว\": return \"#28a745\";\r\n    case \"ต้องแก้ไข\": return \"#dc3545\";\r\n    default: return \"#ffc107\";\r\n  }\r\n};\r\n// (ฟังก์ชันแปลงวันที่)\r\nconst parseDMY = (dateString) => {\r\n  if (!dateString || dateString.includes('-')) return dateString; \r\n  const parts = dateString.split('/');\r\n  if (parts.length === 3) { return `${parts[2]}-${parts[1]}-${parts[0]}`; }\r\n  return dateString; \r\n};\r\nconst formatToDMY = (dateString) => {\r\n  if (!dateString) return \"\";\r\n  try {\r\n    const date = new Date(dateString);\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n    return `${day}/${month}/${year}`;\r\n  } catch (e) { return dateString; }\r\n};\r\n\r\n\r\nexport default function Home() {\r\n  // (State ส่วนใหญ่เหมือนเดิม)\r\n  const [baserowEvents, setBaserowEvents] = useState([]); // (เปลี่ยนชื่อ State)\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  const [selectedEvent, setSelectedEvent] = useState({\r\n    id: 0, Name: \"\", Date: \"\", EndDate: \"\", File: \"\", Status: 1,\r\n  });\r\n\r\n  const handleInputChange = (field, value) => {\r\n    const finalValue = (field === 'Status') ? parseInt(value) : value;\r\n    setSelectedEvent((prev) => ({ ...prev, [field]: finalValue, }));\r\n  };\r\n  const resetEventForm = (dateStr = null) => {\r\n    const formattedDate = dateStr ? formatToDMY(dateStr) : \"\";\r\n    setSelectedEvent({ id: 0, Name: \"\", Date: formattedDate, EndDate: formattedDate, File: \"\", Status: 1, });\r\n  };\r\n\r\n  // --- CRUD Functions (เหมือนเดิม) ---\r\n  function listEvents() {\r\n    setLoading(true);\r\n    let config = { method: \"get\", url: `${BASE_URL}/?user_field_names=true`, headers: { Authorization: API_TOKEN }, };\r\n    axios.request(config)\r\n      .then((response) => {\r\n        const mappedEvents = response.data.results.map(item => ({\r\n          id: item.id,\r\n          title: item.Name,\r\n          start: item.Date,\r\n          end: item.EndDate, \r\n          backgroundColor: getStatusColor(item.Status?.value),\r\n          borderColor: getStatusColor(item.Status?.value),\r\n          extendedProps: item \r\n        }));\r\n        setBaserowEvents(mappedEvents); // (บันทึกข้อมูลจาก Baserow)\r\n        setError(null);\r\n      })\r\n      .catch((error) => { console.log(error); setError(\"เกิดข้อผิดพลาดในการโหลดข้อมูลอีเว้น\"); })\r\n      .finally(() => { setLoading(false); });\r\n  }\r\n  const handleFormCreate = () => {\r\n      if (selectedEvent.Name.length <= 0) { alert(\"กรุณากรอกชื่องาน\"); return false; }\r\n      const parsedStartDate = parseDMY(selectedEvent.Date);\r\n      const parsedEndDate = parseDMY(selectedEvent.EndDate);\r\n      const isoStartDate = parsedStartDate ? new Date(parsedStartDate).toISOString() : null;\r\n      const isoEndDate = (parsedEndDate && parsedEndDate !== parsedStartDate) ? new Date(parsedEndDate).toISOString() : null;\r\n      let data = { Name: selectedEvent.Name, Date: isoStartDate, EndDate: isoEndDate, File: selectedEvent.File ? [{ \"url\": selectedEvent.File }] : [], Status: selectedEvent.Status, };\r\n      let config = { method: \"post\", url: `${BASE_URL}/?user_field_names=true`, headers: { Authorization: API_TOKEN }, data: data, };\r\n      axios.request(config)\r\n        .then(() => { setShow(false); listEvents(); setError(null); })\r\n        .catch((error) => { console.log(error); setError(\"เกิดข้อผิดพลาดในการสร้างข้อมูล\"); });\r\n  }\r\n  const handleFormUpdate = (eventId) => {\r\n      const parsedStartDate = parseDMY(selectedEvent.Date);\r\n      const parsedEndDate = parseDMY(selectedEvent.EndDate);\r\n      const isoStartDate = parsedStartDate ? new Date(parsedStartDate).toISOString() : null;\r\n      const isoEndDate = (parsedEndDate && parsedEndDate !== parsedStartDate) ? new Date(parsedEndDate).toISOString() : null;\r\n      let data = { Name: selectedEvent.Name, Date: isoStartDate, EndDate: isoEndDate, File: selectedEvent.File ? [{ \"url\": selectedEvent.File }] : [], Status: selectedEvent.Status, };\r\n      updateEvent(eventId, data);\r\n  }\r\n  function deleteEvent(row_id) {\r\n    const confirmDelete = window.confirm(`คุณต้องการลบข้อมูลของ ${selectedEvent.Name} ใช่หรือไม่?`);\r\n    if (!confirmDelete) return;\r\n    let config = { method: \"delete\", url: `${BASE_URL}/${row_id}/`, headers: { Authorization: API_TOKEN }, };\r\n    axios.request(config)\r\n      .then(() => { setShow(false); listEvents(); })\r\n      .catch((error) => { console.log(error); setError(\"เกิดข้อผิดพลาดในการลบข้อมูล\"); });\r\n  }\r\n  const handleDateClick = (arg) => {\r\n    resetEventForm(arg.dateStr); \r\n    handleShow();\r\n  };\r\n  const handleEventClick = (arg) => {\r\n    // (ป้องกันไม่ให้แก้ไข Event ที่มาจาก Google)\r\n    if (arg.event.source?.id === 'google') {\r\n        alert(`Event: ${arg.event.title}\\nมาจาก Google Calendar ไม่สามารถแก้ไขในระบบนี้ได้`);\r\n        return;\r\n    }\r\n    const obj = arg.event.extendedProps;\r\n    const formattedStartDate = formatToDMY(obj.Date); \r\n    const formattedEndDate = formatToDMY(obj.EndDate) || formattedStartDate;\r\n    setSelectedEvent({\r\n      id: obj.id, Name: obj.Name || \"\", Date: formattedStartDate, EndDate: formattedEndDate,\r\n      File: obj.File[0]?.url || \"\", Status: obj.Status?.id || 1,\r\n    });\r\n    handleShow();\r\n  };\r\n  const handleEventDrop = (arg) => {\r\n    if (arg.event.source?.id === 'google') {\r\n        alert(\"ไม่สามารถย้าย Event ที่มาจาก Google Calendar ได้\");\r\n        arg.revert();\r\n        return;\r\n    }\r\n    const confirmDrop = window.confirm(`คุณต้องการย้าย Event \"${arg.event.title}\" หรือไม่?`);\r\n    if (confirmDrop) {\r\n      const updatedData = { Date: arg.event.start.toISOString(), EndDate: arg.event.end ? arg.event.end.toISOString() : null };\r\n      updateEvent(arg.event.id, updatedData);\r\n    } else {\r\n      arg.revert(); \r\n    }\r\n  };\r\n  const updateEvent = (eventId, data) => {\r\n    let config = { method: \"patch\", url: `${BASE_URL}/${eventId}/?user_field_names=true`, headers: { Authorization: API_TOKEN }, data: data, };\r\n    axios.request(config)\r\n      .then(() => { setShow(false); listEvents(); setError(null); })\r\n      .catch((error) => { console.log(error); setError(\"เกิดข้อผิดพลาดในการอัปเดตข้อมูล\"); });\r\n  }\r\n  useEffect(() => { listEvents(); }, []);\r\n\r\n  if (loading) {\r\n    return <Spinner animation=\"border\" role=\"status\" className=\"mt-5\" />;\r\n  }\r\n\r\n  return (\r\n    <Container className=\"p-4\">\r\n      <Row className=\"mb-4\">\r\n        <Col className=\"text-center\">\r\n          <h1 className=\"mb-3\">ยินดีต้อนรับสู่ FLOW</h1>\r\n          <p className=\"lead\" style={{ color: 'var(--tech-text)' }}>\r\n            ระบบจัดการอีเวนต์และติดตามใบเสร็จ\r\n          </p>\r\n        </Col>\r\n      </Row>\r\n\r\n      {error && <Alert variant=\"danger\" className=\"mb-4\">{error}</Alert>}\r\n\r\n      <div className=\"bento-grid\">\r\n        \r\n        {/* --- การ์ดที่ 1: ปฏิทิน (กล่องใหญ่) --- */}\r\n        <Card className=\"bento-box-large\">\r\n          <Card.Body className=\"p-4\">\r\n            <Card.Title as=\"h3\" className=\"mb-3\">ปฏิทินกิจกรรม</Card.Title>\r\n            \r\n            <FullCalendar\r\n              plugins={[\r\n                dayGridPlugin,\r\n                timeGridPlugin,\r\n                listPlugin,\r\n                interactionPlugin,\r\n                rrulePlugin,\r\n                googleCalendarPlugin // vvv (3. เพิ่มปลั๊กอินในปฏิทิน) vvv\r\n              ]}\r\n              // vvv (4. เพิ่ม Google API Key) vvv\r\n              googleCalendarApiKey={GOOGLE_CALENDAR_API_KEY}\r\n              \r\n              // vvv (5. เพิ่ม Event Sources 2 แหล่ง) vvv\r\n              eventSources={[\r\n                // แหล่งที่ 1: Baserow (ที่เราดึงมา)\r\n                {\r\n                  events: baserowEvents,\r\n                  color: 'blue' // (อาจจะไม่จำเป็นถ้าสีมาจาก Status)\r\n                },\r\n                // แหล่งที่ 2: Google Calendar (ปลั๊กอินจะดึงเอง)\r\n                {\r\n                  id: 'google',\r\n                  googleCalendarId: GOOGLE_CALENDAR_ID,\r\n                  color: '#009688', // (สีเขียว สำหรับ Event จาก Google)\r\n                  textColor: 'white'\r\n                }\r\n              ]}\r\n              initialView=\"dayGridMonth\"\r\n              headerToolbar={{\r\n                left: \"title\",\r\n                center: \"\",\r\n                right: \"dayGridMonth,timeGridWeek,timeGridDay,listWeek prev,next\"\r\n              }}\r\n              locale=\"th\"\r\n              timeZone=\"local\"\r\n              height=\"auto\"\r\n              editable={true}      \r\n              selectable={true}    \r\n              dateClick={handleDateClick}  \r\n              eventClick={handleEventClick}  \r\n              eventDrop={handleEventDrop}  \r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n\r\n        {/* --- การ์ดที่ 2-4 (Bento Grid) --- */}\r\n        <Card>\r\n          <Card.Body className=\"d-flex flex-column text-center p-4\">\r\n            <Card.Title as=\"h3\">บริหารจัดการ (Admin)</Card.Title>\r\n            <Card.Text className=\"mb-4\">สร้างอีเว้นใหม่, ติดตามสถานะ, และตรวจสอบใบเสร็จ</Card.Text>\r\n            <Button as={Link} to=\"/customers\" variant=\"primary\" size=\"lg\" className=\"mt-auto\">\r\n              ไปหน้าบริหารจัดการ\r\n            </Button>\r\n          </Card.Body>\r\n        </Card>\r\n        <Card>\r\n          <Card.Body className=\"d-flex flex-column text-center p-4\">\r\n            <Card.Title as=\"h3\">กิจกรรม (Event)</Card.Title>\r\n            <Card.Text className=\"mb-4\">ดูกิจกรรมที่กำลังเปิดรับและลงทะเบียนเข้าร่วม</Card.Text>\r\n            <Button as={Link} to=\"/products/อาจารย์และบุคลากร\" variant=\"outline-info\" className=\"mt-auto\">\r\n              ดูกิจกรรมทั้งหมด\r\n            </Button>\r\n          </Card.Body>\r\n        </Card>\r\n        <Card>\r\n          <Card.Body className=\"d-flex flex-column text-center p-4\">\r\n            <Card.Title as=\"h3\">เกี่ยวกับระบบ</Card.Title>\r\n            <Card.Text className=\"mb-4\">ที่มา, เป้าหมาย, และวัตถุประสงค์ของโปรเจค</Card.Text>\r\n            <Button as={Link} to=\"/about\" variant=\"outline-secondary\" className=\"mt-auto\">\r\n              อ่านต่อ\r\n            </Button>\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* --- Modal Form (ไม่แก้ไข) --- */}\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{selectedEvent.id > 0 ? \"แก้ไขข้อมูลอีเว้น\" : \"เพิ่มข้อมูลอีเว้นใหม่\"}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>ชื่องาน</Form.Label>\r\n            <Form.Control type=\"text\" value={selectedEvent.Name} onChange={(e) => handleInputChange(\"Name\", e.target.value)} />\r\n          </Form.Group>\r\n          <Row>\r\n            <Col>\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>วันที่เริ่มต้น</Form.Label>\r\n                <Form.Control type=\"text\" placeholder=\"DD/MM/YYYY\" value={selectedEvent.Date} onChange={(e) => handleInputChange(\"Date\", e.target.value)} />\r\n              </Form.Group>\r\n            </Col>\r\n            <Col>\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>วันที่สิ้นสุด</Form.Label>\r\n                <Form.Control type=\"text\" placeholder=\"DD/MM/YYYY\" value={selectedEvent.EndDate} onChange={(e) => handleInputChange(\"EndDate\", e.target.value)} />\r\n              </Form.Group>\r\n            </Col>\r\n          </Row>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>ลิงก์ใบเสร็จ (Google Drive)</Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"https://drive.google.com/...\" value={selectedEvent.File} onChange={(e) => handleInputChange(\"File\", e.target.value)} />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>สถานะ</Form.Label>\r\n            <Form.Select value={selectedEvent.Status} onChange={(e) => handleInputChange(\"Status\", e.target.value)}>\r\n              <option value=\"1\">รอดำเนินการ</option>\r\n              <option value=\"2\">อนุมัติแล้ว</option>\r\n              <option value=\"3\">ต้องแก้ไข</option>\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {selectedEvent.id > 0 && (\r\n            <Button variant=\"danger\" className=\"me-auto\" onClick={() => deleteEvent(selectedEvent.id)}>\r\n              ลบ Event นี้\r\n            </Button>\r\n          )}\r\n          <Button variant=\"secondary\" onClick={handleClose}>ปิด</Button>\r\n          <Button variant=\"primary\" onClick={selectedEvent.id > 0 ? () => handleFormUpdate(selectedEvent.id) : handleFormCreate}>\r\n            บันทึก\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </Container>\r\n  );\r\n}"],"names":["BASE_URL","API_TOKEN","GOOGLE_CALENDAR_API_KEY","GOOGLE_CALENDAR_ID","getStatusColor","statusValue","parseDMY","dateString","includes","parts","split","length","concat","formatToDMY","date","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","e","Home","baserowEvents","setBaserowEvents","useState","loading","setLoading","error","setError","show","setShow","handleClose","handleShow","selectedEvent","setSelectedEvent","id","Name","EndDate","File","Status","handleInputChange","field","value","finalValue","parseInt","prev","_objectSpread","listEvents","config","method","url","headers","Authorization","axios","request","then","response","mappedEvents","data","results","map","item","_item$Status","_item$Status2","title","start","end","backgroundColor","borderColor","extendedProps","catch","console","log","finally","updateEvent","eventId","useEffect","_jsx","Spinner","animation","role","className","_jsxs","Container","children","Row","Col","style","color","Alert","variant","Card","Body","Title","as","FullCalendar","plugins","dayGridPlugin","timeGridPlugin","listPlugin","interactionPlugin","rrulePlugin","googleCalendarPlugin","googleCalendarApiKey","eventSources","events","googleCalendarId","textColor","initialView","headerToolbar","left","center","right","locale","timeZone","height","editable","selectable","dateClick","arg","dateStr","arguments","undefined","formattedDate","resetEventForm","eventClick","_arg$event$source","_obj$File$","_obj$Status","event","source","alert","obj","formattedStartDate","formattedEndDate","eventDrop","_arg$event$source2","revert","window","confirm","updatedData","toISOString","Text","Button","Link","to","size","Modal","onHide","Header","closeButton","Form","Group","Label","Control","type","onChange","target","placeholder","Select","Footer","onClick","row_id","deleteEvent","parsedStartDate","parsedEndDate","isoStartDate","isoEndDate","handleFormUpdate","handleFormCreate"],"sourceRoot":""}